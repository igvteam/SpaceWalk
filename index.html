<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Spacewalk built with Snowpack" />
    <title>Spacewalk - Vite.js Build - Netlify Deployment</title>

    <link rel="icon" href="./favicon.ico" />

    <!-- Bootstrap 4 CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">

    <!-- Bootstrap-Select CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">

    <!-- jQuery UI CSS -->
    <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <!-- Spectrum colorpicker CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/spectrum-colorpicker2@2.0.0/dist/spectrum.min.css">

    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.20/sl-1.3.1/datatables.min.css"/>

    <!-- Font Awesome -->
    <link rel="stylesheet" type="text/css" href="/styles/fontawesome/all.css">

    <!-- jQuery JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>

    <!-- jQuery UI JS -->
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- jQuery and Bootstrap 4 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Bootstrap-Select JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

    <!-- Spectrum colorpicker JS -->
    <script src="https://cdn.jsdelivr.net/npm/spectrum-colorpicker2@2.0.0/dist/spectrum.min.js"></script>

    <!-- Dropbox Chooser API -->
    <!-- This uses the Spacewalk Dropbox Chooser API key which includes netlify.app domain name -->
    <script src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="tp29md9nyoxkq3t"></script>

    <!-- Datatables JS -->
    <script src="https://cdn.datatables.net/v/dt/dt-1.10.20/sl-1.3.1/datatables.min.js"></script>

    <!-- Google Platform JS -->
    <script src="https://apis.google.com/js/platform.js"></script>

    <!-- Resizable DOM Element Events JS -->
<!--    <script src="./js/vendor/detect-element-resize.js"></script>-->

    <!--  Spacewalk app entrypoint  -->
    <script type="module" src="./js/app.js"></script>

  </head>
  <body>

  <nav class="navbar fixed-top py-0 navbar-expand-sm navbar-dark bg-dark justify-content-between">

    <div class="navbar-brand text-center align-middle">SpaceWalk</div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#spacewalk-navbar-content">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="spacewalk-navbar-content" class="collapse navbar-collapse d-flex flex-row ml-5">
      <ul class="navbar-nav">

        <!-- Spacewalk (.sw) Files -->
        <li class="nav-item">

          <div class="dropdown">

            <a id="spacewalk-sw-load-dropdown-button" href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
              Load SpaceWalk File
            </a>

            <div id="spacewalk-sw-load-dropdown-menu"  class="dropdown-menu">

              <!-- gsdb modal -->
              <!-- TODO: Notify GSDB maintainers to replace http: to https: -->
<!--              <button id="spacewalk-gsdb-button" class="dropdown-item" type="button" data-toggle="modal" data-target="#spacewalk-gsdb-modal">-->
<!--                GSDB-->
<!--              </button>-->

              <!-- select -->
              <button id="spacewalk-sw-load-select-button" class="dropdown-item" type="button" data-toggle="modal" data-target="#spacewalk-sw-load-select-modal">
                Select From List ...
              </button>

              <!-- local file -->
              <label class="dropdown-item btn btn-default btn-file">
                <div>
                  <div>
                    Local File ...
                  </div>
                  <div>
                    <input id="spacewalk-sw-load-local-input" type="file" name="file" style="display: none;">
                  </div>
                </div>
              </label>

              <!-- Dropbox -->
              <div class="dropdown-item">

                <div id="spacewalk-sw-dropbox-button" class="igv-app-dropdown-item-cloud-storage">

                  <div>Dropbox File</div>
                  <div>
                    <img src="img/dropbox-dropdown-menu-item.png" width="18" height="18">
                  </div>

                </div>

              </div>

              <!-- Google Drive -->
              <div class="dropdown-item">
                <div id="spacewalk-sw-google-drive-button" class="igv-app-dropdown-item-cloud-storage">
                  <div>Google Drive File</div>
                  <div><img src="img/googledrive-dropdown-menu-item.png" width="18" height="18"></div>
                </div>
              </div>

              <!-- url -->
              <button id="spacewalk-sw-load-url-button" class="dropdown-item" type="button" data-toggle="modal" data-target="#spacewalk-sw-load-url-modal">
                URL ...
              </button>

            </div>

          </div>

        </li>

        <!-- Contact Maps -->
        <li class="nav-item">

          <div class="dropdown">

            <a id="hic-contact-map-dropdown" href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
              Load Contact Map
            </a>

            <div id="hic-contact-map-dropdown-menu" class="dropdown-menu">

              <!-- Select -->
              <a class="dropdown-item" href="#" data-toggle="modal" data-target="#hic-contact-map-modal">
                Juicebox Archive
              </a>

              <!-- ENCODE hosted maps -->
              <button id="hic-encode-hosted-contact-map-presentation-button" class="dropdown-item" type="button" data-toggle="modal" data-target="#hic-encode-hosted-contact-map-modal">ENCODE
              </button>

              <!-- Local Map File -->
              <label class="dropdown-item btn btn-default btn-file">
                <div class="igv-app-dropdown-item-cloud-storage">
                  <div>
                    Local File
                  </div>
                  <div>
                    <input name="contact-map" type="file" style="display: none;">
                  </div>
                </div>
              </label>

              <!-- Dropbox -->
              <div class="dropdown-item">

                <div id="hic-contact-map-dropdown-dropbox-button" class="igv-app-dropdown-item-cloud-storage">

                  <div>Dropbox File</div>
                  <div>
                    <img src="img/dropbox-dropdown-menu-item.png" width="18" height="18">
                  </div>
                </div>

              </div>

              <!-- Google Drive -->
              <div class="dropdown-item">
                <div id="hic-contact-map-dropdown-google-drive-button" class="igv-app-dropdown-item-cloud-storage">
                  <div>Google Drive File</div>
                  <div><img src="img/googledrive-dropdown-menu-item.png" width="18" height="18"></div>
                </div>
              </div>

              <!-- URL -->
              <a class="dropdown-item" href="#" data-toggle="modal" data-target="#hic-load-url-modal">URL</a>
            </div>

          </div>

        </li>

        <!-- IGV Track Files -->
        <li class="nav-item">

          <div class="dropdown">

            <a id="hic-track-dropdown-button" href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
              Load Genomic Track
            </a>

            <div id="hic-track-dropdown-menu" class="dropdown-menu">

              <!-- Local File -->
              <label class="dropdown-item btn btn-default btn-file">
                <div class="igv-app-dropdown-item-cloud-storage">
                  <div>
                    Local File ...
                  </div>
                  <div>
                    <input id="hic-local-track-file-input" name="local-track-file" type="file"
                           style="display: none;">
                  </div>
                </div>
              </label>

              <!-- Dropbox -->
              <div class="dropdown-item">

                <div id="hic-track-dropdown-dropbox-button" class="igv-app-dropdown-item-cloud-storage">

                  <div>Dropbox File</div>
                  <div>
                    <img src="img/dropbox-dropdown-menu-item.png" width="18" height="18">
                  </div>
                </div>

              </div>

              <!-- Google Drive -->
              <div class="dropdown-item">
                <div id="hic-track-dropdown-google-drive-button" class="igv-app-dropdown-item-cloud-storage">
                  <div>Google Drive File</div>
                  <img src="img/googledrive-dropdown-menu-item.png" width="18" height="18">
                </div>
              </div>

              <!-- URL -->
              <a class="dropdown-item" href="#" data-toggle="modal" data-target="#track-load-url-modal">URL ...</a>

              <div id="hic-annotations-section" class="dropdown-divider">
              </div>

            </div>

          </div>

        </li>

        <!-- Session -->
        <li class="nav-item">
          <div class="dropdown">

            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
              Session
            </a>

            <div id="spacewalk-session-dropdown-menu" class="dropdown-menu">

              <!-- Session Local file -->
              <label class="dropdown-item btn btn-default btn-file">
                <div class="igv-app-dropdown-item-cloud-storage">
                  <div>
                    Local File ...
                  </div>
                  <div>
                    <input id="igv-app-dropdown-local-session-file-input" type="file" name="file" style="display: none;">
                  </div>
                </div>
              </label>

              <!-- Session Dropbox -->

              <!-- Session Google Drive -->

              <!-- Session URL -->
              <button class="dropdown-item" type="button" data-toggle="modal" data-target="#spacewalk-session-url-modal">
                Load URL ...
              </button>

              <div class="dropdown-divider"></div>

              <!-- Save Session Local file -->
              <button class="dropdown-item" type="button" data-toggle="modal" data-target="#spacewalk-session-save-modal">
                Save ...
              </button>

            </div>

          </div>
        </li>

        <!-- Bookmark -->
        <li class="nav-item">
          <button id="spacewalk-share-button" class="btn btn-secondary btn-sm ml-4 mt-1" type="button">Share</button>
        </li>

        <!--            <li>-->
        <!--                <button id="spacewalk-reset-camera-button" class="btn btn-info btn-sm ml-4 mt-1" type="button">-->
        <!--                    Reset Camera-->
        <!--                </button>-->
        <!--            </li>-->

      </ul>
    </div>

    <div id="spacewalk-help-icon-container" class="btn-group dropleft mr-2">

      <div class="dropdown">
        <button id="dropdownMenuButton" type="button" data-toggle="dropdown" class="btn dropdown-toggle">
          <span class="fas fa-info-circle"></span>
        </button>

        <div class="dropdown-menu">
          <a href="https://github.com/igvteam/spacewalk#spacewalk" target="_blank" class="nav-link">Spacewalk Project</a>
          <a href="https://docs.google.com/document/d/10aNNRjDZja1Ey_vdG373dcfLYPEo1gyvAAXtFPuFQk0/edit?usp=sharing" target="_blank" class="nav-link">Spacewalk File Format</a>
        </div>
      </div>


    </div>

  </nav>

  <main id="spacewalk-main" role="main">

    <div id="spacewalk-root-container">

      <!-- 3D model container -->
      <div id="spacewalk-threejs-container" class="ui-widget-content">

        <!-- drag handle -->
        <div id="spacewalk-threejs-drag-container">
          <i class="fas fa-sm fa-grip-horizontal"></i>
        </div>

      </div>

      <!-- general purpose spinner -->
      <div id="spacewalk-spinner-container" class="d-flex justify-content-center align-items-center" style="background-color:transparent;">
        <div id="spacewalk-spinner" class="spinner-border" style="display: none;">
        </div>
      </div>

      <!-- Info Panel -->
      <div id="spacewalk_info_panel" style="display:none;">

        <!-- genome -->
        <div>
          <div>
            GENOME:
          </div>
          <div id="spacewalk_info_panel_genome">
            -
          </div>
        </div>

        <!-- locus -->
        <div>
          <div>
            LOCUS:
          </div>
          <div id="spacewalk_info_panel_locus">
            -
          </div>
        </div>

        <!-- ensemble -->
        <div>
          <div>
            TRACE ENSEMBLE:
          </div>
          <div id="spacewalk_info_panel_ensemble">
            -
          </div>
        </div>

        <!-- juicebox -->
        <div>
          <div>
            Hi-C:
          </div>
          <div id="spacewalk_info_panel_juicebox">
            -
          </div>
        </div>

      </div>

      <!-- UI Manager Button -->
      <div id="spacewalk_ui_manager_button">
        <i class="fas fa-cog fa-2x"></i>
      </div>

      <!-- UI Manager Panel -->
      <div id="spacewalk_ui_manager_panel" class="card" style="display:none;">

        <!-- trace related items -->
        <ul class="list-group list-group-flush">

          <!-- segment navigator -->
          <li class="list-group-item list-group-item-action">
            <input id="spacewalk_ui_manager_ui_controls_color_ramp" data-target="spacewalk_color_ramp_panel" class="mr-2" type="checkbox">
            <div>Segment Navigator</div>
          </li>

          <!-- trace select -->
          <li id="spacewalk_ui_manager_trace_select"  class="list-group-item list-group-item-action">
            <input id="spacewalk_ui_manager_ui_controls_trace_select" data-target="spacewalk_trace_select_panel" class="mr-2" type="checkbox">
            <div>Trace Selector</div>
          </li>

          <!-- render style -->
          <li id="spacewalk_ui_manager_render_styles" class="list-group-item">
            <div>

              <div class="form-check">
                <input name="spacewalk-render-style" id="spacewalk-render-style-ball-stick" class="form-check-input" type="radio" checked>
                <label class="form-check-label" for="spacewalk-render-style-ball-stick">Ball & Stick</label>
              </div>

              <div id="spacewalk-ball-radius-control" class="spacewalk-ball-stick-control">
                <div>
                  Ball Radius
                </div>
                <div>
                  <i class="fas fa-minus-circle"></i>
                  <i class="fas fa-plus-circle"></i>
                </div>
              </div>

              <div id="spacewalk-stick-radius-control" class="spacewalk-ball-stick-control">
                <div>
                  Stick Radius
                </div>
                <div>
                  <i class="fas fa-minus-circle"></i>
                  <i class="fas fa-plus-circle"></i>
                </div>
              </div>

              <div class="form-check">
                <input name="spacewalk-render-style" id="spacewalk-render-style-ribbon" class="form-check-input" type="radio">
                <label class="form-check-label" for="spacewalk-render-style-ribbon">Ribbon</label>
              </div>

            </div>
          </li>

          <!-- background color -->
          <li class="list-group-item spacewalk-colorpicker-li" style="display: none;">

            <div class="input-group">

              <div class="input-group-prepend">
                            <span class="input-group-text spacewalk-colorpicker-input-group-text">
                                Background Color
                            </span>
              </div>

              <input type="text" class="spacewalk-colorpicker-input form-control">

              <div class="input-group-append">
                <div class="input-group-text spacewalk-colorpicker-input-group-text">
                  <input id="spacewalk_background_colorpicker" type="text" class="form-control" data-colorpicker="background">
                </div>
              </div>

            </div>

          </li>

          <!-- groundplane -->
          <li class="list-group-item spacewalk-colorpicker-li">

            <div class="input-group">

              <div class="input-group-prepend">

                <div class="input-group-text spacewalk-colorpicker-input-group-text">
                  <input id="spacewalk_ui_manager_groundplane" type="checkbox">
                </div>

                <span class="input-group-text spacewalk-colorpicker-input-group-text">
                                Ground Plane
                            </span>

              </div>

              <input type="text" class="spacewalk-colorpicker-input form-control">

              <div class="input-group-append">

                <div class="input-group-text spacewalk-colorpicker-input-group-text">
                  <input id="spacewalk_ui_manager_groundplane_colorpicker" type="text" class="form-control" data-colorpicker="groundplane">
                </div>

              </div>

            </div>

          </li>

          <!-- axes (gnomon) -->
          <li class="list-group-item spacewalk-colorpicker-li">

            <div class="input-group">

              <div class="input-group-prepend">

                <div class="input-group-text spacewalk-colorpicker-input-group-text">
                  <input id="spacewalk_ui_manager_gnomon" type="checkbox">
                </div>

                <span class="input-group-text spacewalk-colorpicker-input-group-text">
                                Axes
                            </span>

              </div>

              <input type="text" class="spacewalk-colorpicker-input form-control">

              <div class="input-group-append">

                <div class="input-group-text spacewalk-colorpicker-input-group-text">
                  <input id="spacewalk_ui_manager_gnomon_colorpicker" type="text" class="form-control" data-colorpicker="gnomon">
                </div>

              </div>

            </div>

          </li>

        </ul>

        <!-- Juicebox & Distance Map & Contact Map-->
        <ul class="list-group list-group-flush">

          <!-- IGV -->
          <li class="list-group-item list-group-item-action">
            <input id="spacewalk_ui_manager_ui_controls_igv" data-target="spacewalk_igv_panel" class="mr-2" type="checkbox">
            <div>IGV Viewer</div>
          </li>

          <!-- Juicebox -->
          <li class="list-group-item list-group-item-action">
            <input id="spacewalk_ui_manager_ui_controls_juicebox" data-target="spacewalk_juicebox_panel" class="mr-2" type="checkbox">
            <div>Juicebox Viewer</div>
          </li>

          <!-- Distance Map -->
          <li class="list-group-item list-group-item-action">
            <input id="spacewalk_ui_manager_ui_controls_distance_map" data-target="spacewalk_distance_map_panel" class="mr-2" type="checkbox">
            <div>Distance Map</div>
          </li>

          <!-- Contact Map -->
          <li class="list-group-item list-group-item-action">

            <input id="spacewalk_ui_manager_ui_controls_contact_frequency_map" data-target="spacewalk_contact_frequency_map_panel" class="mr-2" type="checkbox">
            <div>Contact Map</div>
          </li>

        </ul>
      </div>

      <!-- color ramp panel -->
      <div id="spacewalk_color_ramp_panel" class="card">

        <div id="spacewalk_color_ramp_widget_container" class="card-body">

          <div class="spacewalk_card_drag_container">
            <i class="fas fa-square-full"></i>
            <i class="fas fa-sm fa-grip-horizontal"></i>
            <i class="fas fa-times-circle" data-target="spacewalk_ui_manager_ui_controls_color_ramp"></i>
          </div>

          <div id="spacewalk_color_ramp_header">
          </div>

          <div id="spacewalk_color_ramp_canvas_container">

            <!--                    <canvas id="spacewalk_color_ramp_point_cloud_canvas_highlight"></canvas>-->
            <canvas id="spacewalk_color_ramp_canvas_highlight"></canvas>

            <!--                    <canvas id="spacewalk_color_ramp_point_cloud_canvas_rgb"></canvas>-->
            <canvas id="spacewalk_color_ramp_canvas_rgb"></canvas>

            <canvas id="spacewalk_color_ramp_canvas_alpha"></canvas>
          </div>

          <div id="spacewalk_color_ramp_footer">
          </div>

        </div>

      </div>

      <!-- trace select panel -->
      <div id="spacewalk_trace_select_panel" class="card">

        <div class="card-body">

          <div class="spacewalk_card_drag_container">
            <i class="fas fa-square-full"></i>
            <i class="fas fa-sm fa-grip-horizontal"></i>
            <i class="fas fa-times-circle" data-target="spacewalk_ui_manager_ui_controls_trace_select"></i>
          </div>

          <!-- header -->
          <div id="spacewalk_trace_select_header" class="text-center">

          </div>

          <!-- trace select widget -->
          <div class="form-group">
            <div class="input-group input-group-sm">
              <input id="spacewalk_trace_select_input" type="text" class="form-control text-center">
              <div class="input-group-append">
                <button id="spacewalk_trace_select_button_minus" class="btn btn-outline-secondary" type="button"><i class="fas fa-minus"></i></button>
                <button id="spacewalk_trace_select_button_plus" class="btn btn-outline-secondary" type="button"><i class="fas fa-plus"></i></button>
              </div>
            </div>
          </div>

        </div>

      </div>

      <!-- juicebox panel -->
      <div id="spacewalk_juicebox_panel" class="card">

        <div class="card-body p-0">

          <!-- drag handle-->
          <div class="spacewalk_card_drag_container">
            <i class="fas fa-square-full"></i>
            <i class="fas fa-sm fa-grip-horizontal"></i>
            <i class="fas fa-times-circle" data-target="spacewalk_ui_manager_ui_controls_juicebox"></i>
          </div>

          <!-- juicebox browser container -->
          <div id="spacewalk_juicebox_root_container"></div>

        </div>

      </div>

      <!-- igvjs panel -->
      <div id="spacewalk_igv_panel" class="card">

        <div id="spacewalk_igv_container" class="card-body">

          <!-- drag handle -->
          <div class="spacewalk_card_drag_container">
            <i class="fas fa-square-full"></i>
            <i class="fas fa-sm fa-grip-horizontal"></i>
            <i class="fas fa-times-circle" data-target="spacewalk_ui_manager_ui_controls_igv"></i>
          </div>

          <!-- igv browser container -->
          <div id="spacewalk_igv_root_container">

          </div>

        </div>

      </div>

      <!-- distance-map panel -->
      <div id="spacewalk_distance_map_panel" class="card">

        <div class="card-header">

          <!-- drag handle -->
          <div class="spacewalk_card_drag_container">
            <i class="fas fa-square-full"></i>
            <i class="fas fa-sm fa-grip-horizontal"></i>
            <i class="fas fa-times-circle" data-target="spacewalk_ui_manager_ui_controls_distance_map"></i>
          </div>

          <div class="text-center">
            Distance Map
          </div>

          <ul class="nav nav-tabs card-header-tabs">
            <li class="nav-item">
              <a class="nav-link active" data-toggle="tab" href="#spacewalk_distance_map_canvas_trace">Trace</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-toggle="tab" href="#spacewalk_distance_map_canvas_ensemble">Ensemble</a>
            </li>
          </ul>

        </div>

        <!-- distance-map panel body -->
        <div id="spacewalk_distance_map_panel_body" class="card-body p-0">

          <!-- distance-map container -->
          <div id="spacewalk_distance_map_panel_container" class="tab-content">
            <canvas id="spacewalk_distance_map_canvas_trace" class="tab-pane active">
            </canvas>
            <canvas id="spacewalk_distance_map_canvas_ensemble" class="tab-pane">
            </canvas>
          </div>

        </div>

      </div>

      <!-- contact-frequency-map panel -->
      <div id="spacewalk_contact_frequency_map_panel" class="card">

        <div class="card-header">

          <!-- drag handle -->
          <div class="spacewalk_card_drag_container">
            <i class="fas fa-square-full"></i>
            <i class="fas fa-sm fa-grip-horizontal"></i>
            <i class="fas fa-times-circle" data-target="spacewalk_ui_manager_ui_controls_contact_frequency_map"></i>
          </div>

          <div class="text-center">
            Contact Frequency Map
          </div>

          <!-- contact-frequency adjustment -->
          <div class="form-group">
            <div class="input-group input-group-sm p-2">

              <div class="input-group-prepend">
                <span class="input-group-text">Threshold</span>
              </div>

              <input id="spacewalk_contact_frequency_map_adjustment_select_input" type="text" class="form-control text-center">

              <div class="input-group-append">
                <button id="spacewalk_contact_frequency_map__button" class="btn btn-secondary" type="button">Enter</button>
              </div>

            </div>
          </div>

          <ul class="nav nav-tabs card-header-tabs">
            <li class="nav-item">
              <a class="nav-link" data-toggle="tab" href="#spacewalk_contact_frequency_map_canvas_trace">Trace</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" data-toggle="tab" href="#spacewalk_contact_frequency_map_canvas_ensemble">Ensemble</a>
            </li>
          </ul>

        </div>

        <!-- contact-frequency panel body -->
        <div id="spacewalk_contact_frequency_map_panel_body" class="card-body p-0">

          <!-- contact-frequency container -->
          <div id="spacewalk_contact_frequency_map_panel_container" class="tab-content">
            <canvas id="spacewalk_contact_frequency_map_canvas_trace" class="tab-pane">
            </canvas>
            <canvas id="spacewalk_contact_frequency_map_canvas_ensemble" class="tab-pane active">
            </canvas>
          </div>

        </div>

      </div>

    </div>

  </main>

  </body>
</html>
