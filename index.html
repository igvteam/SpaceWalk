<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v3.8.5">
    <title>Tracing 3D</title>


    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>

    <!-- font awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

    <!-- Bootstrap 4 CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- APP CSS -->
    <link rel="stylesheet" href="css/app.css">

    <!-- Bootstrap 4 and Dependancies JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script type="x-shader/x-vertex" id="diffuse_cube_vert">

        vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
            return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
        }

        // vNormalWorldSpace - world space
        varying vec3 vNormalWorldSpace;

        // vNormalEyeSpace - the eye space normal
        varying vec3 vNormalEyeSpace;
        void main() {

            // Use the normalMatrix to convert the world space normal eye space
            // normalMatrix = transpose( inverse( modelViewMatrix ) )
            vNormalEyeSpace = normalMatrix * vec4(normal, 1.0).xyz;

            vNormalWorldSpace = inverseTransformDirection(vNormalEyeSpace, viewMatrix);

            gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );
        }
    </script>

    <script type="x-shader/x-fragment" id="diffuse_cube_frag">
        uniform samplerCube cubicMap;
        varying vec3 vNormalWorldSpace;
        varying vec3 vNormalEyeSpace;
        void main() {
            vec3 index = vec3(-vNormalWorldSpace.x, vNormalWorldSpace.y, vNormalWorldSpace.z);
            vec3 rgb = textureCube(cubicMap, index).rgb;
            gl_FragColor = vec4(rgb, 1.0);
        }
    </script>

    <script type="x-shader/x-vertex" id="show_st_vert">
        varying vec2 vST;
        void main() {
            vST = uv;
            gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );
        }
    </script>

    <script type="x-shader/x-fragment" id="show_st_frag">
        varying vec2 vST;
        void main() {
            gl_FragColor = vec4(vST.s, vST.t, 0.0, 1.0);
        }
    </script>

    <script type="module" src="js/app.js"></script>

</head>

<body>

<nav class="navbar navbar-dark navbar-expand-md fixed-top">

    <span class="navbar-brand">Tracing3D</span>

    <ul class="navbar-nav">
        <li class="nav-item">

            <div class="dropdown">

                <a id="trace3d-file-load-dropdown-button"  data-toggle="dropdown" href="#" class="nav-link dropdown-toggle">
                    Load File
                </a>

                <div id="trace3d-file-load-dropdown-menu"  class="dropdown-menu">

                    <!-- select -->
                    <button id="trace3d-file-load-select-button" class="dropdown-item" type="button" data-toggle="modal" data-target="#trace3d-file-load-select-modal">Select From List ...
                    </button>

                    <!-- local file -->
                    <label class="dropdown-item btn btn-default btn-file">
                        <div>
                            <div>
                                Local File ...
                            </div>
                            <div>
                                <input id="trace3d-file-load-local" type="file" name="file" style="display: none;">
                            </div>
                        </div>
                    </label>

                    <!-- url -->
                    <button id="trace3d-file-load-url-button" class="dropdown-item" type="button" data-toggle="modal" data-target="#trace3d-file-load-url-modal">URL ...
                    </button>

                </div>

            </div>

        </li>
    </ul>

    <span id="trace3d-file-name" class="navbar-brand mx-auto"></span>
</nav>

<main>

    <div id="trace3d_canvas_container">

        <div id="trace3d_ui_manager">
            <i class="fas fa-cog fa-2x"></i>
        </div>

        <!-- color ramp palette -->
        <div id="trace3d_color_ramp_palette" class="card">

            <div id="trace3d_color_ramp_widget_container" class="card-body">

                <div class="trace3d_card_drag_container mb-1">
                    <i class="fas fa-grip-lines"></i>
                </div>

                <div id="trace3d_color_ramp_header">
                </div>

                <div id="trace3d_color_ramp">
                    <canvas></canvas>
                </div>

                <div id="trace3d_color_ramp_footer">
                </div>

            </div>

        </div>

        <!-- structure select palette -->
        <div id="trace3d_structure_select_palette" class="card">

            <div class="card-body">

                <div class="trace3d_card_drag_container mb-1">
                    <i class="fas fa-grip-lines"></i>
                </div>

                <!-- header -->
                <div id="trace3d_structure_select_header" class="text-center">

                </div>

                <!-- structure select widget -->
                <div class="mt-2 mx-2 form-group">
                    <div class="input-group input-group-sm">
                        <input id="trace3d_structure_select_input" type="text" class="form-control text-center">
                        <div class="input-group-append">
                            <button id="trace3d_structure_select_button_minus" class="btn btn-outline-secondary" type="button"><i class="fas fa-minus"></i></button>
                            <button id="trace3d_structure_select_button_plus" class="btn btn-outline-secondary" type="button"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>

            </div>

        </div>

        <!-- igvjs palette -->
        <div id="trace3d_igv_palette" class="card">

            <!-- igvjs container -->
            <div id="trace3d_igv_container" class="card-body">

                <div class="trace3d_card_drag_container mb-1">
                    <i class="fas fa-grip-lines"></i>
                </div>

                <!-- url loader -->
                <div class="form-group">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend">
                            <button id="trace3d_igv_palette_url_button" class="btn btn-outline-secondary" type="button">Load URL</button>
                        </div>
                        <div class="spinner-border" style="display: none;"></div>
                        <input id="trace3d_igv_palette_url_input" class="form-control" type="text" placeholder="Enter Track URL">
                    </div>
                </div>

                <div id="trace3d_igv_track_label" class="text-left">
                </div>

                <!-- track container -->
                <div id="trace3d_igv_track_container">

                    <!-- track canvas -->
                    <canvas></canvas>

                </div>

            </div>

        </div>

    </div>

    <!-- Modal: Select File -->
    <div id="trace3d-file-load-select-modal" class="modal fade">

        <div class="modal-dialog">

            <div class="modal-content">

                <div class="modal-header">

                    <div class="modal-title">Select File</div>

                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>

                </div>

                <div class="modal-body">
                    <div id="trace3d_data_file_load_select_container">
                        <div class="input-group my-3">

                            <div class="spinner-border" style="display: none;">
                                <!-- spinner border-radius: .25rem; -->
                            </div>

                            <select id="trace3d_data_file_load_select" class="form-control custom-select">

                                <option selected>Choose...</option>

                                <option value="https://www.dropbox.com/s/ja43wef9gijubta/A549_chr21-28-30Mb.csv?dl=0">A549 chr21:28-30</option>

                                <option value="https://www.dropbox.com/s/yhlqs6w3sdi6z08/HCT116_chr21-28-30Mb_6h_auxin.csv?dl=0">HCT116 chr21:28-30</option>
                                <option value="https://www.dropbox.com/s/s96fn3ca3wdon4k/HCT116_chr21-28-30Mb_untreated.csv?dl=0">HCT116 chr21:28-30</option>
                                <option value="https://www.dropbox.com/s/sqfrqweqeg4so22/HCT116_chr21-34-37Mb_6h_auxin.csv?dl=0">HCT116 chr21:34-37 (6h auxin)</option>
                                <option value="https://www.dropbox.com/s/qbvvnopakr016ps/HCT116_chr21-34-37Mb_auxin_cellDiv.csv?dl=0">HCT116 chr21:34-37 (auxin cellDiv)</option>
                                <option value="https://www.dropbox.com/s/vy48d4vsa3m5np4/HCT116_chr21-34-37Mb_untreated.csv?dl=0">HCT116 chr21:34-37 (untreated)</option>

                                <option value="https://www.dropbox.com/s/ycbj30umsu0y809/IMR90_chr21-18-20Mb.csv?dl=0">IMR90 chr21:18-20</option>
                                <option value="https://www.dropbox.com/s/ifydtm0b730baqu/IMR90_chr21-28-30Mb_cell_cycle.csv?dl=0">IMR90 chr21:28-30 (cell cycle)</option>
                                <option value="https://www.dropbox.com/s/vi2t8p8gu5u13ag/IMR90_chr21-28-30Mb.csv?dl=0">IMR90 chr21:28-30</option>

                                <option value="https://www.dropbox.com/s/u7je35e95zykzbn/K562_chr21-28-30Mb.csv?dl=0">K562 chr21:28-30</option>

                            </select>
                        </div>
                    </div>
                </div>

            </div>

        </div>

    </div>

    <!-- Modal: Load File From URL -->
    <div id="trace3d-file-load-url-modal" class="modal fade">

        <div class="modal-dialog">

            <div class="modal-content">

                <div class="modal-header">
                    <div class="modal-title">Load File From URL</div>

                    <button id="trace3d_data_file_load_url_upper_cancel_button" type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>

                </div>

                <div class="modal-body">
                    <div id="trace3d_data_file_load_url_container">
                        <div class="input-group">
                            <div class="spinner-border" style="display: none;">
                                <!-- spinner -->
                            </div>
                            <input id="trace3d_data_file_load_url_input" class="form-control" type="text" placeholder="Enter URL">
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button id="trace3d_data_file_load_url_cancel_button" type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>
                    <button id="trace3d_data_file_load_url_ok_button" type="button" class="btn btn-sm btn-secondary">OK</button>
                </div>

            </div>

        </div>

    </div>

</main>

</body>

</html>
