<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Spacewalk built with Snowpack" />
    <title>Spacewalk - Vite.js Build - Netlify Deployment</title>

    <link rel="icon" href="./favicon.ico" />

    <!-- Bootstrap 4 CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">

    <!-- Bootstrap-Select CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">

    <!-- jQuery UI CSS -->
    <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <!-- Spectrum colorpicker CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/spectrum-colorpicker2@2.0.0/dist/spectrum.min.css">

    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.20/sl-1.3.1/datatables.min.css"/>

    <!-- Font Awesome -->
    <link rel="stylesheet" type="text/css" href="/styles/fontawesome/all.css">

    <!-- jQuery JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>

    <!-- jQuery UI JS -->
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- jQuery and Bootstrap 4 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Bootstrap-Select JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

    <!-- Spectrum colorpicker JS -->
    <script src="https://cdn.jsdelivr.net/npm/spectrum-colorpicker2@2.0.0/dist/spectrum.min.js"></script>

    <!-- Dropbox Chooser API -->
    <!-- This uses the Spacewalk Dropbox Chooser API key which includes netlify.app domain name -->
    <script src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="tp29md9nyoxkq3t"></script>

    <!-- Datatables JS -->
    <script src="https://cdn.datatables.net/v/dt/dt-1.10.20/sl-1.3.1/datatables.min.js"></script>

    <!-- Google Platform JS -->
    <script src="https://apis.google.com/js/platform.js"></script>

    <!-- Resizable DOM Element Events JS -->
<!--    <script src="./js/vendor/detect-element-resize.js"></script>-->

    <!--  Spacewalk app entrypoint  -->
    <script type="module" src="./js/app.js"></script>

  </head>
  <body>

  <nav class="navbar fixed-top py-0 navbar-expand-sm navbar-dark bg-dark justify-content-between">

    <div class="navbar-brand text-center align-middle">SpaceWalk</div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#spacewalk-navbar-content">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="spacewalk-navbar-content" class="collapse navbar-collapse d-flex flex-row">

      <ul class="navbar-nav">

        <!-- Spacewalk Files -->
        <li class="nav-item">

          <div class="dropdown ml-2 mt-1">

            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
              Spacewalk
            </a>

            <ul id="spacewalk-file-dropdown" class="dropdown-menu">

              <!-- Selection List -->
              <li>
                <button id="spacewalk-sw-load-select-button" class="dropdown-item" type="button" data-toggle="modal" data-target="#spacewalk-sw-load-select-modal">
                  Select From List ...
                </button>
              </li>

              <!-- Local Files -->
              <li>

                <label class="dropdown-item btn btn-default btn-file">
                  <div>
                    <div>
                      Local File ...
                    </div>
                    <div>
                      <input id="spacewalk-sw-load-local-input" type="file" name="file" style="display: none;">
                    </div>
                  </div>
                </label>

              </li>

              <!-- Dropbox -->
              <li>
                <div class="dropdown-item">

                  <div id="spacewalk-sw-dropbox-button" class="igv-app-dropdown-item-cloud-storage">

                    <div>Dropbox File</div>
                    <div>
                      <img src="img/dropbox-dropdown-menu-item.png" width="18" height="18">
                    </div>

                  </div>

                </div>
              </li>

              <!-- Google Drive -->
              <li>
                <div class="dropdown-item">
                  <div id="spacewalk-sw-google-drive-button" class="igv-app-dropdown-item-cloud-storage">
                    <div>Google Drive File</div>
                    <div><img src="img/googledrive-dropdown-menu-item.png" width="18" height="18"></div>
                  </div>
                </div>
              </li>

              <!-- URL -->
              <li>
                <button id="spacewalk-sw-load-url-button" class="dropdown-item" type="button" data-toggle="modal" data-target="#spacewalk-sw-load-url-modal">
                  URL ...
                </button>
              </li>

            </ul>

          </div>

        </li>

        <!-- Genomic Files -->
        <li class="nav-item">

          <div class="dropdown ml-2 mt-1">

            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
              Genomic
            </a>

            <ul id="spacewalk-track-dropdown-menu"  class="dropdown-menu">

              <!-- Local File -->
              <li>
                <label class="dropdown-item btn btn-default btn-file">
                  <div class="igv-app-dropdown-item-cloud-storage">
                    <div>
                      Local File ...
                    </div>
                    <div>
                      <input id="hic-local-track-file-input" name="local-track-file" type="file" style="display: none;">
                    </div>
                  </div>
                </label>
              </li>

              <!-- Dropbox -->
              <li>
                <div class="dropdown-item">
                  <div id="spacewalk-track-dropbox-button" class="igv-app-dropdown-item-cloud-storage">

                    <div>Dropbox File</div>
                    <div>
                      <img src="img/dropbox-dropdown-menu-item.png" width="18" height="18">
                    </div>
                  </div>
                </div>
              </li>

              <!-- Google Drive -->
              <li>
                <div class="dropdown-item">
                  <div id="spacewalk-track-dropdown-google-drive-button" class="igv-app-dropdown-item-cloud-storage">
                    <div>Google Drive File</div>
                    <img src="img/googledrive-dropdown-menu-item.png" width="18" height="18">
                  </div>
                </div>
              </li>

              <!-- URL -->
              <li>
                <a class="dropdown-item" href="#" data-toggle="modal" data-target="#track-load-url-modal">URL ...</a>
              </li>

              <div id="hic-annotations-section" class="dropdown-divider">
              </div>

            </ul>

          </div>

        </li>

        <!-- Juicebox Files -->
        <li class="nav-item">

          <div class="dropdown ml-2 mt-1">

            <a id="hic-contact-map-dropdown" href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
              Juicebox
            </a>

            <ul class="dropdown-menu">

              <!-- Select -->
              <li>
                <a class="dropdown-item" href="#" data-toggle="modal" data-target="#hic-contact-map-modal">
                  Juicebox Archive
                </a>
              </li>

              <!-- ENCODE hosted maps -->
              <li>
                <button class="dropdown-item" id="hic-encode-hosted-contact-map-presentation-button" type="button" data-toggle="modal" data-target="#hic-encode-hosted-contact-map-modal">ENCODE
                </button>
              </li>

              <!-- Local Map File -->
              <li>

                <label class="dropdown-item btn btn-default btn-file">
                  <div class="igv-app-dropdown-item-cloud-storage">
                    <div>
                      Local File
                    </div>
                    <div>
                      <input name="contact-map" type="file" style="display: none;">
                    </div>
                  </div>
                </label>


              </li>

              <!-- Dropbox -->
              <li>
                <div class="dropdown-item">

                  <div id="hic-contact-map-dropdown-dropbox-button" class="igv-app-dropdown-item-cloud-storage">

                    <div>Dropbox File</div>
                    <div>
                      <img src="img/dropbox-dropdown-menu-item.png" width="18" height="18">
                    </div>
                  </div>

                </div>
              </li>

              <!-- Google Drive -->
              <li>
                <div class="dropdown-item">
                  <div id="hic-contact-map-dropdown-google-drive-button" class="igv-app-dropdown-item-cloud-storage">
                    <div>Google Drive File</div>
                    <div><img src="img/googledrive-dropdown-menu-item.png" width="18" height="18"></div>
                  </div>
                </div>
              </li>

              <!-- URL -->
              <li>
                <a class="dropdown-item" href="#" data-toggle="modal" data-target="#hic-load-url-modal">URL</a>
              </li>

            </ul>

          </div>

        </li>

        <!-- Viewers -->
        <li class="nav-item">
          <div class="dropdown ml-2 mt-1">

            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
              Viewers
            </a>

            <ul id="spacewalk-viewers-dropdown-menu" class="dropdown-menu checkbox-menu allow-focus">

              <!-- IGV Viewer -->
              <li >
                <label>
                  <input id="spacewalk_ui_manager_ui_controls_igv" data-target="spacewalk_igv_panel" type="checkbox"> IGV Viewer
                </label>
              </li>

              <!-- Juicebox Viewer -->
              <li >
                <label>
                  <input id="spacewalk_ui_manager_ui_controls_juicebox" data-target="spacewalk_juicebox_panel" type="checkbox"> Juicebox Viewer
                </label>
              </li>

              <!-- Distance Map -->
              <li >
                <label>
                  <input id="spacewalk_ui_manager_ui_controls_distance_map" data-target="spacewalk_distance_map_panel" type="checkbox"> Distance Map
                </label>
              </li>

              <!-- Contact Frequency Map -->
              <li >
                <label>
                  <input id="spacewalk_ui_manager_ui_controls_contact_frequency_map" data-target="spacewalk_contact_frequency_map_panel" type="checkbox"> Contact Frequency Map
                </label>
              </li>

            </ul>

          </div>
        </li>

        <!-- trace-select widget -->
        <div class="ml-2 input-group">
          <input type="text" class="form-control text-center" id="spacewalk_trace_select_input">
          <div class="input-group-append">
            <button id="spacewalk_trace_select_button_minus" class="btn btn-light  btn-sm" type="button"><i class="fas fa-minus"></i></button>
            <button id="spacewalk_trace_select_button_plus" class="btn btn-light  btn-sm" type="button"><i class="fas fa-plus"></i></button>
          </div>
        </div>

        <!-- Session -->
        <li class="nav-item">
          <div class="dropdown ml-2 mt-1">

            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
              Session
            </a>

            <div id="spacewalk-session-dropdown-menu" class="dropdown-menu">

              <!-- Session Local file -->
              <label class="dropdown-item btn btn-default btn-file">
                <div class="igv-app-dropdown-item-cloud-storage">
                  <div>
                    Local File ...
                  </div>
                  <div>
                    <input id="igv-app-dropdown-local-session-file-input" type="file" name="file" style="display: none;">
                  </div>
                </div>
              </label>

              <!-- Session Dropbox -->

              <!-- Session Google Drive -->

              <!-- Session URL -->
              <button class="dropdown-item" type="button" data-toggle="modal" data-target="#spacewalk-session-url-modal">
                Load URL ...
              </button>

              <div class="dropdown-divider"></div>

              <!-- Save Session Local file -->
              <button class="dropdown-item" type="button" data-toggle="modal" data-target="#spacewalk-session-save-modal">
                Save ...
              </button>

            </div>

          </div>
        </li>

        <!-- Share -->
<!--        <li class="nav-item">-->
<!--          <button id="spacewalk-share-button" class="btn btn-secondary btn-sm ml-2 mt-2" type="button">Share</button>-->
<!--        </li>-->

      </ul>

    </div>

    <div id="spacewalk-help-icon-container" class="btn-group dropleft mr-2">

      <div class="dropdown">
        <button id="dropdownMenuButton" type="button" data-toggle="dropdown" class="btn dropdown-toggle">
          <span class="fas fa-info-circle"></span>
        </button>

        <div class="dropdown-menu">
          <a href="https://github.com/igvteam/spacewalk#spacewalk" target="_blank" class="nav-link">Spacewalk Project</a>
          <a href="https://docs.google.com/document/d/10aNNRjDZja1Ey_vdG373dcfLYPEo1gyvAAXtFPuFQk0/edit?usp=sharing" target="_blank" class="nav-link">Spacewalk File Format</a>
        </div>
      </div>

    </div>

  </nav>

  <main id="spacewalk-main" role="main">

    <div id="spacewalk-root-container">

      <!-- Info Panel -->
      <div id="spacewalk_info_panel" style="display:none;">

        <!-- genome -->
        <div>
          <div>
            GENOME:
          </div>
          <div id="spacewalk_info_panel_genome">
            -
          </div>
        </div>

        <!-- locus -->
        <div>
          <div>
            LOCUS:
          </div>
          <div id="spacewalk_info_panel_locus">
            -
          </div>
        </div>

        <!-- ensemble -->
        <div>
          <div>
            TRACE ENSEMBLE:
          </div>
          <div id="spacewalk_info_panel_ensemble">
            -
          </div>
        </div>

        <!-- juicebox -->
        <div>
          <div>
            Hi-C:
          </div>
          <div id="spacewalk_info_panel_juicebox">
            -
          </div>
        </div>

      </div>

      <!-- three-js container -->
      <div id="spacewalk-threejs-container">

        <!-- drag handle -->
        <div id="spacewalk-threejs-drag-container">
          <i class="fas fa-sm fa-grip-horizontal"></i>
        </div>

        <!-- three-js canvas | trace-navigator -->
        <div id="spacewalk-threejs-trace-navigator-container">

          <!-- three-js canvas container -->
          <div id="spacewalk-threejs-canvas-container">

            <!-- Render Settings Button -->
            <div id="spacewalk-threejs-settings-button-container">

              <button id="spacewalk-threejs-settings-button" type="button" class="btn btn-default">
                <i class="fas fa-cog fa-lg"></i>
              </button>

            </div>

            <!-- Render Settings Panel -->
            <div id="spacewalk_ui_manager_panel" class="card" style="display: none;">

              <ul class="list-group list-group-flush">

                <!-- render style -->
                <li id="spacewalk_ui_manager_render_styles" class="list-group-item">
                  <div>

                    <div class="form-check">
                      <input name="spacewalk-render-style" id="spacewalk-render-style-ball-stick" class="form-check-input" type="radio" checked>
                      <label class="form-check-label" for="spacewalk-render-style-ball-stick">Ball & Stick</label>
                    </div>

                    <div id="spacewalk-ball-radius-control" class="spacewalk-ball-stick-control">
                      <div>
                        Ball Radius
                      </div>
                      <div>
                        <i class="fas fa-minus-circle"></i>
                        <i class="fas fa-plus-circle"></i>
                      </div>
                    </div>

                    <div id="spacewalk-stick-radius-control" class="spacewalk-ball-stick-control">
                      <div>
                        Stick Radius
                      </div>
                      <div>
                        <i class="fas fa-minus-circle"></i>
                        <i class="fas fa-plus-circle"></i>
                      </div>
                    </div>

                    <div class="form-check">
                      <input name="spacewalk-render-style" id="spacewalk-render-style-ribbon" class="form-check-input" type="radio">
                      <label class="form-check-label" for="spacewalk-render-style-ribbon">Ribbon</label>
                    </div>

                  </div>
                </li>

                <!-- groundplane -->
                <li class="list-group-item spacewalk-colorpicker-li">

                  <div class="input-group">

                    <div class="input-group-prepend">
                      <div class="input-group-text">
                        <input id="spacewalk_ui_manager_groundplane" type="checkbox">
                      </div>
                      <div class="input-group-text">Ground Plane</div>
                    </div>

                    <div class="input-group-append">
                        <div class="input-group-text" data-colorpicker="groundplane"></div>
                    </div>

                  </div>

                </li>

                <!-- axes (gnomon) -->
                <li class="list-group-item spacewalk-colorpicker-li">

                  <div class="input-group">

                    <div class="input-group-prepend">
                      <div class="input-group-text">
                        <input id="spacewalk_ui_manager_gnomon" type="checkbox">
                      </div>
                      <span class="input-group-text">Axes</span>
                    </div>

                    <div class="input-group-append">
                        <div class="input-group-text" data-colorpicker="gnomon"></div>
                    </div>

                  </div>

                </li>

              </ul>

            </div>

          </div>

          <!-- trace navigator -->
          <div id="spacewalk-trace-navigator-container">

            <!-- header -->
            <div id="spacewalk-trace-navigator-header"></div>

            <!-- widget -->
            <div id="spacewalk-trace-navigator-widget">

              <canvas id="spacewalk_color_ramp_canvas_highlight"></canvas>

              <canvas id="spacewalk_color_ramp_canvas_rgb"></canvas>

              <canvas id="spacewalk_color_ramp_canvas_alpha"></canvas>
            </div>

            <!-- footer -->
            <div id="spacewalk-trace-navigator-footer"></div>

          </div>

        </div>

      </div>

      <!-- general purpose spinner -->
      <div id="spacewalk-spinner-container" class="d-flex justify-content-center align-items-center" style="background-color:transparent;">
        <div id="spacewalk-spinner" class="spinner-border" style="display: none;">
        </div>
      </div>

      <!-- juicebox panel -->
      <div id="spacewalk_juicebox_panel" class="card">

        <div class="card-body p-0">

          <!-- drag handle-->
          <div class="spacewalk_card_drag_container">
            <i class="fas fa-square-full"></i>
            <i class="fas fa-sm fa-grip-horizontal"></i>
            <i class="fas fa-times-circle" data-target="spacewalk_ui_manager_ui_controls_juicebox"></i>
          </div>

          <!-- juicebox browser container -->
          <div id="spacewalk_juicebox_root_container"></div>

        </div>

      </div>

      <!-- igvjs panel -->
      <div id="spacewalk_igv_panel" class="card">

        <div id="spacewalk_igv_container" class="card-body">

          <!-- drag handle -->
          <div class="spacewalk_card_drag_container">
            <i class="fas fa-square-full"></i>
            <i class="fas fa-sm fa-grip-horizontal"></i>
            <i class="fas fa-times-circle" data-target="spacewalk_ui_manager_ui_controls_igv"></i>
          </div>

          <!-- igv browser container -->
          <div id="spacewalk_igv_root_container">

          </div>

        </div>

      </div>

      <!-- distance-map panel -->
      <div id="spacewalk_distance_map_panel" class="card">

        <div class="card-header">

          <!-- drag handle -->
          <div class="spacewalk_card_drag_container">
            <i class="fas fa-square-full"></i>
            <i class="fas fa-sm fa-grip-horizontal"></i>
            <i class="fas fa-times-circle" data-target="spacewalk_ui_manager_ui_controls_distance_map"></i>
          </div>

          <div class="text-center">
            Distance Map
          </div>

          <ul class="nav nav-tabs card-header-tabs">
            <li class="nav-item">
              <a class="nav-link active" data-toggle="tab" href="#spacewalk_distance_map_canvas_trace">Trace</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-toggle="tab" href="#spacewalk_distance_map_canvas_ensemble">Ensemble</a>
            </li>
          </ul>

        </div>

        <div id="spacewalk_distance_map_panel_body" class="card-body p-0">

          <div id="spacewalk_distance_map_panel_container" class="tab-content">
            <canvas id="spacewalk_distance_map_canvas_trace" class="tab-pane active">
            </canvas>
            <canvas id="spacewalk_distance_map_canvas_ensemble" class="tab-pane">
            </canvas>
          </div>

        </div>

      </div>

      <!-- contact-frequency-map panel-->
      <div id="spacewalk_contact_frequency_map_panel" class="card">

        <div class="card-header">

          <!-- drag handle -->
          <div class="spacewalk_card_drag_container">
            <i class="fas fa-square-full"></i>
            <i class="fas fa-sm fa-grip-horizontal"></i>
            <i class="fas fa-times-circle" data-target="spacewalk_ui_manager_ui_controls_contact_frequency_map"></i>
          </div>

          <div class="text-center">
            Contact Frequency Map
          </div>

          <!-- contact-frequency adjustment -->
          <div class="form-group">
            <div class="input-group input-group-sm p-2">

              <div class="input-group-prepend">
                <span class="input-group-text">Threshold</span>
              </div>

              <input id="spacewalk_contact_frequency_map_adjustment_select_input" type="text" class="form-control text-center">

              <div class="input-group-append">
                <button id="spacewalk_contact_frequency_map__button" class="btn btn-secondary" type="button">Enter</button>
              </div>

            </div>
          </div>

          <ul class="nav nav-tabs card-header-tabs">
            <li class="nav-item">
              <a class="nav-link" data-toggle="tab" href="#spacewalk_contact_frequency_map_canvas_trace">Trace</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" data-toggle="tab" href="#spacewalk_contact_frequency_map_canvas_ensemble">Ensemble</a>
            </li>
          </ul>

        </div>

        <div id="spacewalk_contact_frequency_map_panel_body" class="card-body p-0">

          <div id="spacewalk_contact_frequency_map_panel_container" class="tab-content">
            <canvas id="spacewalk_contact_frequency_map_canvas_trace" class="tab-pane">
            </canvas>
            <canvas id="spacewalk_contact_frequency_map_canvas_ensemble" class="tab-pane active">
            </canvas>
          </div>

        </div>

      </div>

    </div>

  </main>

  </body>
</html>
